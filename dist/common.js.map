{"version":3,"sources":["./src/app/shared/components/base-resource-list/base-resource-list.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAiE;AAChB;AAIY;AACF;AACV;AAEW;AAE5D;IAaE,mCAAsB,mBAA2C,EAAY,YAA+B;QAAtF,wBAAmB,GAAnB,mBAAmB,CAAwB;QAAY,iBAAY,GAAZ,YAAY,CAAmB;QAXrG,cAAS,GAAQ,EAAE,CAAC;QACpB,kBAAa,GAAG,EAAE,CAAC;QACnB,eAAU,GAAG,IAAI,0EAAkB,CAAI,IAAI,CAAC,SAAS,CAAC,CAAC;QACvD,wBAAmB,GAAa,EAAE,CAAC;QAEnC,cAAS,GAAW,yEAAU,CAAC,aAAa,CAAC;IAM4D,CAAC;IAE1G,4CAAQ,GAAf;QACE,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAEM,mDAAe,GAAtB;QAAA,iBAKC;QAJC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,SAAS,CACzC,mBAAS,IAAI,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAX,CAAW,CAAC,EAAtD,CAAsD,EACnE,cAAM,YAAI,CAAC,YAAY,CAAC,eAAe,CAAC,4DAAQ,CAAC,0BAA0B,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,EAA1F,CAA0F,CACjG,CAAC;IACJ,CAAC;IACM,kDAAc,GAArB,UAAsB,QAAW;QAAjC,iBAKC;QAJC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CACpD,cAAO,YAAI,CAAC,IAAI,EAAE,EAAX,CAAW,EAClB,UAAC,KAAK,IAAK,YAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAA3B,CAA2B,CACvC,CAAC;IACJ,CAAC;IAGD,wCAAI,GAAJ;QAAA,iBASC;QARC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,CAAC,IAAI,EACxC,CAAC,SAAS,CAAC,UAAC,MAAW;YACtB,KAAI,CAAC,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC;YACtC,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC;YAC7C,eAAM,YAAI,CAAC,YAAY,CAAC,eAAe,CAAC,4DAAQ,CAAC,0BAA0B,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,EAA1F,CAA0F,EAAC;QAEnG,CAAC,CACA,CAAC;IACJ,CAAC;IAED,+CAAW,GAAX,UAAY,KAAY;QACtB,IAAM,WAAW,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;QAC7D,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IAC5D,CAAC;IAGD,gDAAY,GAAZ;QACE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;IAC/B,CAAC;IAEA,mDAAe,GAAf;QACE,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACjC,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;IAC7C,CAAC;IAGM,mDAAe,GAAtB,UAAuB,KAAK;QAC1B,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,4DAAQ,CAAC,aAAa,CAAC,CAAC;QAE1D,IAAI,WAAW,GAAG,KAAK,CAAC;QACxB,IAAI,WAAW,CAAC,KAAK,EAAE;YACrB,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC;SACjC;QACD,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACvB,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;SACvC;QAED,IAAI,WAAW,CAAC,MAAM,KAAK,GAAG,EAAE;YAC9B,IAAI,CAAC,mBAAmB,GAAG,CAAC,4DAAQ,CAAC,qBAAqB,CAAC,CAAC;YAE5D,IAAI,CAAC,mBAAmB,GAAG,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,GAAG,4DAAQ,CAAC,qBAAqB,CAAC,CAAC;SACzF;aAAM;YACL,IAAI,WAAW,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,CAAC,4DAAQ,CAAC,cAAc,CAAC,CAAC;aACtD;iBAAM;gBACL,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBACpC,IAAI,CAAC,mBAAmB,GAAG,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,GAAG,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;aACjH;SACF;IACH,CAAC;IACO,8CAAU,GAAlB,UAAmB,QAAwB;QACzC,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,QAAQ,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;YAChE,KAAK,GAAG,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC;SAC7E;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAhFwB;QAAxB,+DAAS,CAAC,wEAAY,CAAC;gFAAY,wEAAY;gEAAC;IAC7B;QAAnB,+DAAS,CAAC,8DAAO,CAAC;gFAAO,8DAAO;2DAAC;IAiFpC,gCAAC;CAAA;AA5F8C","file":"common.js","sourcesContent":["import { OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport Messages from '../../enums/messages.enum';\nimport { BaseResourceModel } from '../../models/base-resource.model';\nimport { AlertModalService } from './../../services/alert-modal.service';\nimport { BaseResourceService } from './../../services/base-resource.service';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { FieldMessage } from 'src/app/core/config/fieldmessage';\nimport { API_CONFIG } from 'src/app/core/config/api.config';\n\nexport abstract class BaseResourceListComponent<T extends BaseResourceModel> implements AfterViewInit, OnInit {\n\n  public resources: T[] = [];\n  public componentName = '';\n  public dataSource = new MatTableDataSource<T>(this.resources);\n  public serverErrorMessages: string[] = [];\n  public displayedColumns: string[];\n  public bucketUrl: string = API_CONFIG.bucketBaseUrl;\n\n\n  @ViewChild(MatPaginator) paginator: MatPaginator;\n  @ViewChild(MatSort) sort: MatSort;\n\n  constructor(protected baseResourceService: BaseResourceService<T>, protected alertService: AlertModalService) { }\n\n  public ngOnInit() {\n    this.getAllResources();\n  }\n\n  public getAllResources() {\n    this.baseResourceService.getAll().subscribe(\n      resources => this.resources = resources.sort((a, b) => b.id - a.id),\n      () => this.alertService.showAlertDanger(Messages.ERRO_GENERICO_CARREGAMENTO(this.componentName))\n    );\n  }\n  public deleteResource(resource: T) {\n    this.baseResourceService.delete(resource.id).subscribe(\n      () =>  this.load(),\n      (error) => this.actionsForError(error)\n    );\n  }\n\n\n  load() {\n    this.baseResourceService.listTodos().pipe(\n    ).subscribe((result: any) => {\n      this.dataSource.data = result.content;\n      this.paginator.length = result.totalElements;\n      () => this.alertService.showAlertDanger(Messages.ERRO_GENERICO_CARREGAMENTO(this.componentName));\n\n    }\n    );\n  }\n\n  applyFilter(event: Event) {\n    const filterValue = (event.target as HTMLInputElement).value;\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n  }\n\n\n  clearFilters() {\n    this.dataSource.filter = '';\n }\n\n  ngAfterViewInit() {\n    this.dataSource.sort = this.sort;\n    this.dataSource.paginator = this.paginator;\n  }\n\n\n  public actionsForError(error) {\n    this.alertService.showAlertDanger(Messages.OPERACAO_ERRO);\n\n    let objetoError = error;\n    if (objetoError.error) {\n      objetoError = objetoError.error;\n    }\n    if (!objetoError.status) {\n      objetoError = JSON.parse(objetoError);\n    }\n\n    if (objetoError.status === 403) {\n      this.serverErrorMessages = [Messages.ACESSO_NEGADO_EXCLUIR];\n\n      this.serverErrorMessages = [objetoError.status + ': ' + Messages.ACESSO_NEGADO_EXCLUIR];\n    } else {\n      if (objetoError.status === 404) {\n        this.serverErrorMessages = [Messages.FALHA_SERVIDOR];\n      } else {\n        this.listErrors(objetoError.errors);\n        this.serverErrorMessages = [objetoError.status + ': ' + objetoError.error, this.listErrors(objetoError.errors)];\n      }\n    }\n  }\n  private listErrors(messages: FieldMessage[]): string {\n    let error = '';\n    for (let increment = 0; increment < messages.length; increment++) {\n      error = error + messages[increment].fieldName + messages[increment].message;\n    }\n    return error;\n  }\n\n}\n"],"sourceRoot":"webpack:///"}